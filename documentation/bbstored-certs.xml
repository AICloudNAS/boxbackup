<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <refmeta>
    <refentrytitle>bbstored-certs</refentrytitle>

    <manvolnum>8</manvolnum>

    <refmiscinfo>Box Backup 0.11</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>bbstored-certs</refname>

    <refpurpose>Manage certificates for the Box Backup system</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>bbstored-certs</command>

      <arg choice="plain">certs-dir</arg>

      <arg choice="plain">command</arg>

      <arg>arguments</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>Description</title>

    <para><command>bbstored-certs</command> creates and signs certificates for
    use in Box Backup. It allows the user to create and sign the server keys,
    as well as signing client keys.</para>

    <para>All commands must be followed by the <varname>certs-dir</varname>,
    which is the directory in which the certificates are stored.</para>

    <refsection>
      <title>Commands</title>

      <para>There are 3 commands:</para>

      <variablelist>
        <varlistentry>
          <term><command>init</command></term>

          <listitem>
            <para>Create the <varname>certs-dir</varname>, and generate the
            server keys for bbstored. <varname>certs-dir</varname> cannot
            exist before running the command.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><command>sign-server</command>
          <varname>servercsrfile</varname></term>

          <listitem>
            <para>Sign the server certificate. The
            <varname>servercsrfile</varname> is the file generated by the
            <command>init</command> command.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><command>sign</command>
          <varname>clientcsrfile</varname></term>

          <listitem>
            <para>Sign a client certificate. The
            <varname>clientcsrfile</varname> is generated during client setup.
            See <citerefentry>
                <refentrytitle>bbackupd-config</refentrytitle>

                <manvolnum>8</manvolnum>
              </citerefentry>. Send the signed certificate back to the client,
            and install according to the instructions given by
            <command>bbackupd-config</command>.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </refsection>
  </refsection>

  <refsection>
    <title>Files</title>

    <para><citerefentry>
        <refentrytitle>raidfile-config</refentrytitle>

        <manvolnum>8</manvolnum>
      </citerefentry> generates the <citerefentry>
        <refentrytitle>raidfile.conf</refentrytitle>

        <manvolnum>5</manvolnum>
      </citerefentry> file.</para>
  </refsection>

  <refsection>
    <title>Bugs</title>

    <para>If you find a bug in Box Backup, and you want to let us know about
    it, join the <ulink
    url="http://lists.warhead.org.uk/mailman/listinfo/boxbackup">mailing
    list</ulink>, and send a description of the problem there.</para>

    <para>To report a bug, give us at least the following information:</para>

    <itemizedlist>
      <listitem>
        <para>The version of Box Backup you are running</para>
      </listitem>

      <listitem>
        <para>The platform you are running on (hardware and OS), for both
        client and server.</para>
      </listitem>

      <listitem>
        <para>If possible attach your config files (bbstored.conf,
        bbackupd.conf) to the bug report.</para>
      </listitem>

      <listitem>
        <para>Also attach any log file output that helps shed light on the
        problem you are seeing.</para>
      </listitem>

      <listitem>
        <para>And last but certainly not least, a description of what you are
        seeing, in as much detail as possible.</para>
      </listitem>
    </itemizedlist>
  </refsection>

  <refsection>
    <title>See Also</title>

    <para><citerefentry>
        <refentrytitle>bbstored-config</refentrytitle>

        <manvolnum>8</manvolnum>
      </citerefentry>, <citerefentry>
        <refentrytitle>bbstored.conf</refentrytitle>

        <manvolnum>5</manvolnum>
      </citerefentry>, <citerefentry>
        <refentrytitle>bbstoreaccounts</refentrytitle>

        <manvolnum>8</manvolnum>
      </citerefentry></para>
  </refsection>

  <refsection>
    <title>Authors</title>

    <para><author>
        <personname>Ben Summers</personname>
      </author></para>

    <para><author>
        <personname>Per Thomsen</personname>
      </author></para>

    <para><author>
        <personname>James O'Gorman</personname>
      </author></para>
  </refsection>
</refentry>
